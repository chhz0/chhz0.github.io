<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Redis - List | ch.hugo</title>
<link rel=icon href=favicon.svg sizes=any type=image/svg+xml><meta property="og:url" content="https://chhz0.github.io/notes/database/redis/datatypes/list/"><meta property="og:site_name" content="ch.hugo"><meta property="og:title" content="Redis - List"><meta property="og:description" content="Redis < List > Redis List是一组连续的字符串值链表，这意味着向List的头部或者尾部中添加新元素的操作会在恒定的时间内完成， 无论其已经存储了多少元素，但是缺点是访问元素的操作则需要遍历List，时间复杂度为O(N)
Redis List经常用于:
实现堆栈和队列 为后台系统构建队列管理 List 命令 常用命令:
创建 –> LPUSH, RPUSH LPUSH key value [value ...] # 从头部增加元素，返回List中元素总数 RPUSH key value [value ...] # 从尾部增加元素，返回List中元素总数 查询 –> LLEN, LRANGE LLEN # 查看List的长度，即List中元素的总数 LRANGE key start stop # 查看start到stop为角标的元素 更新 –> LPUSH, RPUSH, LPOP, RPOP, LREM LPOP key # 移除并获取列表的第一个元素 RPOP key # 移除并获取列表的第一个元素 LREM key count value # 移除值等于value的元素 count = 0 ，则移除所有等于value的元素； count > 0 ，则从左到右开始移除count个value元素； count < 0，则从右往左移除count个元素 删除 –> DEL, UNLINK DEL key [key ...] # 删除对象，返回值为删除成功了几个键 UNLIKN key [key ...] # 删除对象，返回值为删除成功了几个键 del命令与unlink命令均为删除对象，不同的是del命令是同步删除目录，会阻塞客户端，直到删除完成； unlink命令是异步删除命令，只是取消key在键空间的关联，让其不在能查到，删除是异步进行，所以不会阻塞客户端."><meta property="og:locale" content="zh_cn"><meta property="og:type" content="article"><meta property="article:section" content="notes"><meta property="article:published_time" content="2025-06-10T22:36:08+08:00"><meta property="article:modified_time" content="2025-06-10T22:36:08+08:00"><meta property="article:tag" content="Redis"><meta name=twitter:card content="summary"><meta name=twitter:title content="Redis - List"><meta name=twitter:description content="Redis < List > Redis List是一组连续的字符串值链表，这意味着向List的头部或者尾部中添加新元素的操作会在恒定的时间内完成， 无论其已经存储了多少元素，但是缺点是访问元素的操作则需要遍历List，时间复杂度为O(N)
Redis List经常用于:
实现堆栈和队列 为后台系统构建队列管理 List 命令 常用命令:
创建 –> LPUSH, RPUSH LPUSH key value [value ...] # 从头部增加元素，返回List中元素总数 RPUSH key value [value ...] # 从尾部增加元素，返回List中元素总数 查询 –> LLEN, LRANGE LLEN # 查看List的长度，即List中元素的总数 LRANGE key start stop # 查看start到stop为角标的元素 更新 –> LPUSH, RPUSH, LPOP, RPOP, LREM LPOP key # 移除并获取列表的第一个元素 RPOP key # 移除并获取列表的第一个元素 LREM key count value # 移除值等于value的元素 count = 0 ，则移除所有等于value的元素； count > 0 ，则从左到右开始移除count个value元素； count < 0，则从右往左移除count个元素 删除 –> DEL, UNLINK DEL key [key ...] # 删除对象，返回值为删除成功了几个键 UNLIKN key [key ...] # 删除对象，返回值为删除成功了几个键 del命令与unlink命令均为删除对象，不同的是del命令是同步删除目录，会阻塞客户端，直到删除完成； unlink命令是异步删除命令，只是取消key在键空间的关联，让其不在能查到，删除是异步进行，所以不会阻塞客户端."><link rel=stylesheet href=/css/components.min.9d886688d3ae94cecf1b057e706bf74497fcd5cea352d433c34cda3b9425a8d4.css integrity="sha256-nYhmiNOulM7PGwV+cGv3RJf81c6jUtQzw0zaO5QlqNQ=" crossorigin=anonymous><link rel=stylesheet href=/css/main.min.17813e97a146cc70fc6064666a89082f1ef2f6213c7d3fade88402a86cf8aa3c.css integrity="sha256-F4E+l6FGzHD8YGRmaokILx7y9iE8fT+t6IQCqGz4qjw=" crossorigin=anonymous><link rel=stylesheet href=/css/root.min.1677bc99f2421f7cb9fc1d00b09addcc951fd9d4c785e22b20ed55c0602786fc.css integrity="sha256-Fne8mfJCH3y5/B0AsJrdzJUf2dTHheIrIO1VwGAnhvw=" crossorigin=anonymous><link rel=stylesheet href=/css/search.min.cb1ed1dad3ee872e229e9f1fc681bdbd20d923389f1fa6aaf89f9aee93af4fbf.css integrity="sha256-yx7R2tPuhy4inp8fxoG9vSDZIzifH6aq+J+a7pOvT78=" crossorigin=anonymous><link rel=stylesheet href=/css/bundle.min.4878d16c866148ae8cfd6f4f44052d25f2548b24ab4a9bc857279dc6d06df2b5.css integrity="sha256-SHjRbIZhSK6M/W9PRAUtJfJUiySrSpvIVyedxtBt8rU=" crossorigin=anonymous><script src=/js/bundle.995e4ec99401021e081ec256bee66154ef7f4e5136809432513b2e6d014b4b1d.js integrity="sha256-mV5OyZQBAh4IHsJWvuZhVO9/TlE2gJQyUTsubQFLSx0=" crossorigin=anonymous></script><script defer src=/js/search/flexsearch.compact.64594b125f7b78bdf4fa8316955922bbebb1cd6baef3f16654bfca20309f18f8.js integrity="sha256-ZFlLEl97eL30+oMWlVkiu+uxzWuu8/FmVL/KIDCfGPg="></script><script defer src=/js/search/search.1d980f84df11f3eb7c8c5f17f541d49a0611608df179dd74fa7f06225eb56ace.js integrity="sha256-HZgPhN8R8+t8jF8X9UHUmgYRYI3xed10+n8GIl61as4="></script><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Spectral:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel=stylesheet><link href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:opsz,wght@12..96,200..800&family=Spectral:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel=stylesheet></head><body class=notransition><div id=container><header id=main-header><div role=navigation aria-label=Main><div class=nav-left><a href=https://chhz0.github.io/ style=color:inherit>ch.hugo</a></div><div class=nav-right><div style=position:absolute;width:0;height:0><div id=nav-dropdown-menu class=hidden href=#><div class=nav-item><a href=/blogs/>博客</a></div><div class=nav-item><a aria-current=true class=ancestor href=/notes/>笔记</a></div><div class=nav-item><a href=/about/>关于</a></div></div></div><a id=nav-dropdown-button href=#><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4 6H20M4 12H20M4 18H20" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></a><div id=nav-menu><div class=nav-item><a href=/blogs/>博客</a></div><div class=nav-item><a aria-current=true class=ancestor href=/notes/>笔记</a></div><div class=nav-item><a href=/about/>关于</a></div></div><a id=theme-switcher href=#><svg class="light-icon" viewBox="0 0 24 24" fill="none"><path d="M12 3V4m0 16v1M4 12H3M6.31412 6.31412 5.5 5.5m12.1859.81412L18.5 5.5M6.31412 17.69 5.5 18.5001M17.6859 17.69 18.5 18.5001M21 12H20m-4 0c0 2.2091-1.7909 4-4 4-2.20914.0-4-1.7909-4-4 0-2.20914 1.79086-4 4-4 2.2091.0 4 1.79086 4 4z" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
<svg class="dark-icon" viewBox="0 0 24 24" fill="none"><path d="M3.32031 11.6835c0 4.9706 4.02944 9 8.99999 9 3.7872.0 7.028-2.3392 8.3565-5.6515C19.6402 15.4486 18.5059 15.6834 17.3203 15.6834c-4.9706.0-8.99999-4.0294-8.99999-8.99998C8.32031 5.50338 8.55165 4.36259 8.96453 3.32996 5.65605 4.66028 3.32031 7.89912 3.32031 11.6835z" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
</a>|
<a id=theme-switcher href=https://github.com/chhz0 aria-label=GitHub><svg class="light-icon" width="800" height="800" viewBox="0 0 20 20" xmlns:xlink="http://www.w3.org/1999/xlink"><title>github [#142]</title><desc>Created with Sketch.</desc><defs/><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Dribbble-Light-Preview" transform="translate(-140.000000, -7559.000000)" fill="#fff"><g id="icons" transform="translate(56.000000, 160.000000)"><path d="M94 7399C99.523 7399 104 7403.59 104 7409.253 104 7413.782 101.138 7417.624 97.167 7418.981 96.66 7419.082 96.48 7418.762 96.48 7418.489 96.48 7418.151 96.492 7417.047 96.492 7415.675 96.492 7414.719 96.172 7414.095 95.813 7413.777 98.04 7413.523 100.38 7412.656 100.38 7408.718 100.38 7407.598 99.992 7406.684 99.35 7405.966 99.454 7405.707 99.797 7404.664 99.252 7403.252 99.252 7403.252 98.414 7402.977 96.505 7404.303 95.706 7404.076 94.85 7403.962 94 7403.958 93.15 7403.962 92.295 7404.076 91.497 7404.303 89.586 7402.977 88.746 7403.252 88.746 7403.252 88.203 7404.664 88.546 7405.707 88.649 7405.966 88.01 7406.684 87.619 7407.598 87.619 7408.718 87.619 7412.646 89.954 7413.526 92.175 7413.785 91.889 7414.041 91.63 7414.493 91.54 7415.156 90.97 7415.418 89.522 7415.871 88.63 7414.304 88.63 7414.304 88.101 7413.319 87.097 7413.247 87.097 7413.247 86.122 7413.234 87.029 7413.87 87.029 7413.87 87.684 7414.185 88.139 7415.37 88.139 7415.37 88.726 7417.2 91.508 7416.58 91.513 7417.437 91.522 7418.245 91.522 7418.489 91.522 7418.76 91.338 7419.077 90.839 7418.982 86.865 7417.627 84 7413.783 84 7409.253 84 7403.59 88.478 7399 94 7399" id="github-[#142]"/></g></g></g></svg><svg class="dark-icon" width="800" height="800" viewBox="0 0 20 20" xmlns:xlink="http://www.w3.org/1999/xlink"><title>github [#142]</title><desc>Created with Sketch.</desc><defs/><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Dribbble-Light-Preview" transform="translate(-140.000000, -7559.000000)" fill="#000"><g id="icons" transform="translate(56.000000, 160.000000)"><path d="M94 7399C99.523 7399 104 7403.59 104 7409.253 104 7413.782 101.138 7417.624 97.167 7418.981 96.66 7419.082 96.48 7418.762 96.48 7418.489 96.48 7418.151 96.492 7417.047 96.492 7415.675 96.492 7414.719 96.172 7414.095 95.813 7413.777 98.04 7413.523 100.38 7412.656 100.38 7408.718 100.38 7407.598 99.992 7406.684 99.35 7405.966 99.454 7405.707 99.797 7404.664 99.252 7403.252 99.252 7403.252 98.414 7402.977 96.505 7404.303 95.706 7404.076 94.85 7403.962 94 7403.958 93.15 7403.962 92.295 7404.076 91.497 7404.303 89.586 7402.977 88.746 7403.252 88.746 7403.252 88.203 7404.664 88.546 7405.707 88.649 7405.966 88.01 7406.684 87.619 7407.598 87.619 7408.718 87.619 7412.646 89.954 7413.526 92.175 7413.785 91.889 7414.041 91.63 7414.493 91.54 7415.156 90.97 7415.418 89.522 7415.871 88.63 7414.304 88.63 7414.304 88.101 7413.319 87.097 7413.247 87.097 7413.247 86.122 7413.234 87.029 7413.87 87.029 7413.87 87.684 7414.185 88.139 7415.37 88.139 7415.37 88.726 7417.2 91.508 7416.58 91.513 7417.437 91.522 7418.245 91.522 7418.489 91.522 7418.76 91.338 7419.077 90.839 7418.982 86.865 7417.627 84 7413.783 84 7409.253 84 7403.59 88.478 7399 94 7399" id="github-[#142]"/></g></g></g></svg></a></div></div></header><div class="flex grow"><div id=main-pane><main id=main-content><div class=single-header><ol class=breadcrumbs itemscope itemtype=https://schema.org/BreadcrumbList><li itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a itemprop=item href=https://chhz0.github.io/><span itemprop=name>Home</span>
</a><meta itemprop=position content='1'></li><span>&nbsp»&nbsp</span><li itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a itemprop=item href=https://chhz0.github.io/notes/><span itemprop=name>Notes</span>
</a><meta itemprop=position content='2'></li><span>&nbsp»&nbsp</span><li itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a itemprop=item href=https://chhz0.github.io/notes/database/><span itemprop=name>Database</span>
</a><meta itemprop=position content='3'></li><span>&nbsp»&nbsp</span><li itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a itemprop=item href=https://chhz0.github.io/notes/database/redis/><span itemprop=name>Redis</span>
</a><meta itemprop=position content='4'></li><span>&nbsp»&nbsp</span><li itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a itemprop=item href=https://chhz0.github.io/notes/database/redis/datatypes/><span itemprop=name>Redis - Datatypes</span>
</a><meta itemprop=position content='5'></li><span>&nbsp»&nbsp</span></ol><h1>Redis - List</h1><time class=dim datetime=2025-06-10T22:36:08+08:00>June 10, 2025</time><div class=term-container><div class=tag><a href=https://chhz0.github.io/tags/redis/>#Redis</a></div></ol></div><section class=page-section><h2 id=redis--list->Redis &lt; List ></h2><p>Redis List是一组连续的字符串值<strong>链表</strong>，这意味着向List的头部或者尾部中添加新元素的操作会在恒定的时间内完成，
无论其已经存储了多少元素，但是缺点是访问元素的操作则需要遍历List，时间复杂度为O(N)</p><p>Redis List经常用于:</p><ul><li>实现堆栈和队列</li><li>为后台系统构建队列管理</li></ul><h3 id=list-命令>List 命令</h3><p>常用命令:</p><ul><li>创建 &ndash;> <code>LPUSH</code>, <code>RPUSH</code><ul><li><code>LPUSH key value [value ...]</code> # 从头部增加元素，返回List中元素总数</li><li><code>RPUSH key value [value ...]</code> # 从尾部增加元素，返回List中元素总数</li></ul></li><li>查询 &ndash;> <code>LLEN</code>, <code>LRANGE</code><ul><li><code>LLEN</code> # 查看List的长度，即List中元素的总数</li><li><code>LRANGE key start stop</code> # 查看start到stop为角标的元素</li></ul></li><li>更新 &ndash;> <code>LPUSH</code>, <code>RPUSH</code>, <code>LPOP</code>, <code>RPOP</code>, <code>LREM</code><ul><li><code>LPOP key</code> # 移除并获取列表的第一个元素</li><li><code>RPOP key</code> # 移除并获取列表的第一个元素</li><li><code>LREM key count value</code> # 移除值等于value的元素<ul><li>count = 0 ，则移除所有等于value的元素；</li><li>count > 0 ，则从左到右开始移除count个value元素；</li><li>count &lt; 0，则从右往左移除count个元素</li></ul></li></ul></li><li>删除 &ndash;> <code>DEL</code>, <code>UNLINK</code><ul><li><code>DEL key [key ...]</code> # 删除对象，返回值为删除成功了几个键</li><li><code>UNLIKN key [key ...]</code> # 删除对象，返回值为删除成功了几个键</li></ul></li></ul><blockquote><p>del命令与unlink命令均为删除对象，不同的是del命令是同步删除目录，会阻塞客户端，直到删除完成；
unlink命令是异步删除命令，只是取消key在键空间的关联，让其不在能查到，删除是异步进行，所以不会阻塞客户端.</p></blockquote><p>List还支持多个阻塞命令：<code>BLPOP</code>, <code>BLMOVE</code>&mldr;</p><ul><li><code>BLPOP</code> # 从列表头部删除并返回一个元素。如果列表为空，则该命令将阻塞，直到有元素可用或达到指定的超时为止.</li><li><code>BMOVE</code> # 以原子方式将元素从源列表移动到目标列表。如果源列表为空，该命令将阻塞，直到有新元素可用.</li></ul><p>::: tip 详细List命令
🔗 <a href="https://redis.io/docs/latest/commands/?group=list">List命令列表</a>
:::</p><h3 id=list-编码底层实现>List 编码(底层实现)</h3><p>在<code>Redis.Version &lt; 3.2</code>时，List的编码为<code>ZIPLIST</code>或<code>LINKEDLIST</code>，在<code>Redis.Version >= 3.2</code>时，List的编码为<code>QUICKLIST</code>，当<code>Redis.Version >= 7.0</code>后，<code>ZIPLIST</code>优化为<code>LISTPACK</code>，其本质也是一种压缩列表.</p><p>List对象保存的所有字符串长度都小于64字节，且对象元素个数少于512个时，使用<code>ZIPLIST</code>编码，否则使用<code>LINKEDLIST</code>编码.</p><p>ZIPLIST的底层使用压缩列表实现，内存排序紧凑，可以有效节省内存空间.</p><blockquote><p>[!NOTE] 编码详解
🔗 <a href=/notes/database/redis/datatypes/encoding/ziplist/>查看ZIPLIST编码</a></p></blockquote><p>如果使用<code>LINKEDLIST</code>编码，是以链表的形式连接，在内存上不如<code>ZIPLIST</code>紧凑，所以只有在List元素个数或者节点长度比较大的时候，才会使用<code>LINKEDLIST</code>编码.</p><p><code>LINKEDLIST</code>是以牺牲内存换取更快的处理性能.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>typedef</span> <span style=color:#66d9ef>struct</span> list {
</span></span><span style=display:flex><span>    listNode <span style=color:#f92672>*</span>head;
</span></span><span style=display:flex><span>    listNode <span style=color:#f92672>*</span>tail;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#f92672>*</span>(<span style=color:#f92672>*</span>dup)(<span style=color:#66d9ef>void</span> <span style=color:#f92672>*</span>ptr);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> (<span style=color:#f92672>*</span>free)(<span style=color:#66d9ef>void</span> <span style=color:#f92672>*</span>ptr);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> (<span style=color:#f92672>*</span>match)(<span style=color:#66d9ef>void</span> <span style=color:#f92672>*</span>ptr, <span style=color:#66d9ef>void</span> <span style=color:#f92672>*</span>key);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>unsigned</span> <span style=color:#66d9ef>long</span> len;
</span></span><span style=display:flex><span>} list;
</span></span></code></pre></div><p>在Redis 3.2版本只会，引入了<code>QUICKLIST</code>编码. <code>QUICKLIST</code>编码是<code>ZIPLIST</code>和<code>LINKEDLIST</code>的结合体，<code>LINKEDLIST</code>原先的节点存放数据，现在单个节点存放的是一个<code>ZIPLIST</code>.</p><ul><li>当数据较少时，<code>QUICKLIST</code>的节点只有一个，相当于一个<code>ZIPLIST</code>.</li><li>当数据较多时，则同时利用<code>ZIPLIST</code>和<code>LINKEDLIST</code>的优点.</li></ul><p><img src=/redis/redis-quicklist-map.drawio.svg alt=redis-quicklist-map></p></section></main><footer id=main-footer><div class=footer><a href=#>回到顶部 ↑</a><div class=footer-copyright><div>© 2025 Chen-Hang</div><div>powered by <a href=https://github.com/math-queiroz/rusty-typewriter target=_blank>Rusty Typewriter</a> theme for <a href=https://gohugo.io/ target=_blank>Hugo</a></div></div></div></footer></div><aside id=side-pane class=side-sticky><div class=side-details><span>874 字数</span>
<span>3 - 4 阅读时间</span><div class=side-details-taxonomy><small>categories:
<span class=details-taxonomy><a href=https://chhz0.github.io/categories/note>Note</a></span></small></div></div><h3>目录</h3><nav id=TableOfContents><ul><li><a href=#redis--list->Redis &lt; List ></a><ul><li><a href=#list-命令>List 命令</a></li><li><a href=#list-编码底层实现>List 编码(底层实现)</a></li></ul></li></ul></nav><h3>相关</h3><ul><li><a href=/notes/database/redis/datatypes/encoding/hashtable/>Redis - Encoding&lt;HashTable></a></li><li><a href=/notes/database/redis/datatypes/encoding/skiplist/>Redis - Encoding&lt;SkipList></a></li><li><a href=/notes/database/redis/datatypes/encoding/ziplist/>Redis - Encoding&lt;ZipList></a></li><li><a href=/notes/database/redis/datatypes/encoding/sds/>Redis - Encoding&lt;sds></a></li><li><a href=/notes/database/redis/datatypes/hash/>Redis - Hash</a></li></ul></aside></div></div></body></html>